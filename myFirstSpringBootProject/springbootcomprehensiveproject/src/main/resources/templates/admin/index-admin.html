<!doctype html>
<html class="no-js " lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <meta name="description" content="Responsive Bootstrap 4 and web Application ui kit.">

    <title>首页</title>
    <link rel="icon" th:href="@{/favicon.ico}" href="../favicon.ico" type="image/x-icon">
    <!-- Favicon-->
    <link rel="stylesheet" th:href="@{/assets/plugins/bootstrap/css/bootstrap.min.css}" href="../assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/assets/plugins/morrisjs/morris.css}" href="../assets/plugins/morrisjs/morris.css"/>

    <link rel="stylesheet" th:href="@{/assets/plugins/footable-bootstrap/css/footable.bootstrap.min.css}" href="../assets/plugins/footable-bootstrap/css/footable.bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/assets/plugins/footable-bootstrap/css/footable.standalone.min.css}" href="../assets/plugins/footable-bootstrap/css/footable.standalone.min.css">
    <!-- Custom Css -->
    <link rel="stylesheet" th:href="@{/assets/css/main.css}" href="../assets/css/main.css">
    <link rel="stylesheet" th:href="@{/assets/css/hm-style.css}" href="../assets/css/hm-style.css">
    <link rel="stylesheet" th:href="@{/assets/css/color_skins.css}" href="../assets/css/color_skins.css">
</head>

<body class="theme-purple index2">
<!-- Page Loader -->
<div class="page-loader-wrapper">
    <div class="loader">
        <div class="m-t-30"><img class="zmdi-hc-spin" th:src="@{/assets/images/logo.svg}" src="../assets/images/logo.svg" width="48" height="48" alt="Oreo"></div>
        <p>Please wait...</p>        
    </div>
</div>

<!-- Overlay For Sidebars -->
<div class="overlay"></div>

<!-- 上方工具栏 -->
<nav class="navbar p-l-5 p-r-5">
    <ul class="nav navbar-nav navbar-left">
        <li>
            <div class="navbar-header">
                <a href="javascript:void(0);" class="bars"></a>
                <img th:src="@{/assets/images/logo.svg}" src="../assets/images/logo.svg" width="30" alt="Oreo">
                <span class="m-l-10" style="color: white">管理员页面</span>
            </div>
        </li>
        <li class="hidden-md-down">
            <a href="javascript:void(0)" title="Events">
                <i class="zmdi zmdi-calendar"></i>
            </a>
        </li>
        <li class="hidden-md-down">
            <a href="javascript:void(0)" title="Inbox">
                <i class="zmdi zmdi-email"></i>
            </a>
        </li>
        <li>
            <a href="javascript:void(0)" title="Contact List">
                <i class="zmdi zmdi-account-box-phone"></i>
            </a>
        </li>
        <!--待审核通知-->
        <li th:if="${jobWaiting.size() > 0}" class="dropdown">
            <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button">
                <i class="zmdi zmdi-notifications"></i>
                <div class="notify">
                    <span class="heartbit"></span><span class="point"></span>
                </div>
            </a>
            <ul class="dropdown-menu pullDown">
                <li class="body">
                    <ul class="menu list-unstyled">
                        <li th:each="jobWait : ${jobWaiting}">
                            <a href="javascript:void(0);">
                                <div class="media">
                                    <div class="media-body">
                                        <span class="name" th:text="${jobWait.promulgator}">张三
                                            <span class="time" th:text="${#dates.format(jobWait.releaseTime, 'yyyy-MM-dd mm:hh:ss')}">2020-04-20</span>
                                        </span>
                                        <span th:text="${jobWait.jobTheme}" class="message">Java工程师岗位发布申请</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="hidden-sm-down">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search...">
                <span class="input-group-addon">
                    <i class="zmdi zmdi-search"></i>
                </span>
            </div>
        </li>
        <li class="float-right">
            <a href="javascript:void(0);" class="fullscreen hidden-sm-down" data-provide="fullscreen" data-close="true"><i class="zmdi zmdi-fullscreen"></i></a>
            <a th:href="@{/logout}" href="../sign-in.html" class="mega-menu" data-close="true"><i class="zmdi zmdi-power"></i></a>
            <a href="javascript:void(0);" class="js-right-sidebar" data-close="true"><i class="zmdi zmdi-settings zmdi-hc-spin"></i></a>
        </li>
    </ul>
</nav>

<!--横向菜单栏-->
<div class="menu-container">
    <div class="menu">
        <ul class="pullDown">
            <li><a th:href="@{/index}" href="javascript:void(0)">首页</a>
                <ul class="pullDown">
                    <li><a th:href="@{/index}" href="index-admin.html">主页</a> </li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">商家功能</a>
                <ul class="pullDown">
                    <li><a th:href="@{/admin/list-job}" href="javascript:void(0)">批准审核</a> </li>
                    <li><a th:href="@{/admin/list-merchant}" href="javascript:void(0)">商家列表</a> </li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">学生功能</a>
                <ul class="pullDown">
                    <li> <a th:href="@{/admin/list-student}" href="#" >学生列表</a> </li>
                    <li> <a th:href="@{/admin/add-student}" href="add-student.html" >注册学籍</a> </li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">个人相关</a>
                <ul class="pullDown">
                    <li><a href="javascript:void(0)">我的信息</a></li>
                    <li><a href="javascript:void(0)">修改密码</a></li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">校方功能</a>
                <ul class="pullDown">
                    <li> <a href="javascript:void(0)" >功能1</a></li>
                    <li> <a href="javascript:void(0)" >功能2</a></li>
                    <li> <a href="javascript:void(0)" >功能3</a></li>
                    <li> <a href="javascript:void(0)" >功能4</a></li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">学校公告</a>
                <ul class="pullDown">
                    <li><a href="javascript:void(0)">公告1</a></li>
                    <li><a href="javascript:void(0)">公告2</a></li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">关于我们 </a>
                <ul class="pullDown">
                    <li><a href="javascript:void(0)">版权所有</a> </li>
                </ul>
            </li>
            <li><a href="javascript:void(0)">系统功能</a>
                <ul class="pullDown">
                    <li><a th:href="@{/druid}" href="javascript:void(0)">安全查看</a> </li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<!-- 右侧边栏 -->
<aside id="rightsidebar" class="right-sidebar">
    <ul class="nav nav-tabs">
        <!--设置图标-->
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#setting">
                <i class="zmdi zmdi-settings zmdi-hc-spin"></i>
            </a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane slideRight active" id="setting">
            <div class="slim_scroll">
                <div class="card">
                    <h6>普通设置</h6>
                    <ul class="setting-list list-unstyled">
                        <li>
                            <div class="checkbox">
                                <input id="checkbox1" type="checkbox">
                                <label for="checkbox1">Report Panel Usage</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <input id="checkbox2" type="checkbox" checked="">
                                <label for="checkbox2">Email Redirect</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <input id="checkbox3" type="checkbox" checked="">
                                <label for="checkbox3">Notifications</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <input id="checkbox4" type="checkbox" checked="">
                                <label for="checkbox4">Auto Updates</label>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="card">
                    <h6>主题设置</h6>
                    <ul class="choose-skin list-unstyled">
                        <li data-theme="purple" class="active">
                            <div class="purple"></div>
                        </li>
                        <li data-theme="blue">
                            <div class="blue"></div>
                        </li>
                        <li data-theme="cyan">
                            <div class="cyan"></div>
                        </li>
                        <li data-theme="green">
                            <div class="green"></div>
                        </li>
                        <li data-theme="orange">
                            <div class="orange"></div>
                        </li>
                        <li data-theme="blush">
                            <div class="blush"></div>
                        </li>
                    </ul>
                </div>
                <div class="card">
                    <h6>账户设置</h6>
                    <ul class="setting-list list-unstyled">
                        <li>
                            <div class="checkbox">
                                <input id="checkbox5" type="checkbox" checked="">
                                <label for="checkbox5">Offline</label>
                            </div>
                        </li>
                        <li>
                            <div class="checkbox">
                                <input id="checkbox6" type="checkbox" checked="">
                                <label for="checkbox6">Location Permission</label>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="card theme-light-dark">
                    <h6>菜单风格</h6>
                    <button class="t-light btn btn-default btn-simple btn-round btn-block">Light</button>
                    <button class="t-dark btn btn-default btn-round btn-block">Dark</button>
                    <button class="m_img_btn btn btn-primary btn-round btn-block">Sidebar Image</button>
                </div>
            </div>
        </div>
    </div>
</aside>

<section class="content">
    <div class="block-header">
        <div class="row">
            <div class="col-lg-7 col-md-6 col-sm-12">
                <h2>管理员首页
                <small th:text="${session.loginUser.name}">管理员名字</small>
                </h2>
            </div>
            <div class="col-lg-5 col-md-6 col-sm-12">
                <button class="btn btn-white btn-icon btn-round hidden-sm-down float-right m-l-10" type="button">
                    <i class="zmdi zmdi-plus"></i>
                </button>
                <ul class="breadcrumb float-md-right">
                    <li class="breadcrumb-item"><a href="index-admin.html"><i class="zmdi zmdi-home"></i>刷新</a></li>
                    <li class="breadcrumb-item active">首页</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-lg-3 col-md-6 col-sm-12 text-center">
                <div class="card tasks_report">
                    <div class="body">
                        <input type="text" id="memoryTotalCir" class="knob dial1" value="100" data-width="90" data-height="90" data-thickness="0.1" data-fgColor="#26dad2" readonly>
                        <h6 class="m-t-20" id="memoryTotal">内存总量</h6>
<!--                        th:text="${session.loginUserNumberSessionListener.STUDENT_ONLINE_NUMBER}"-->
                        <p class="displayblock m-b-0" id="memoryPercent">100% 占比 <i class="zmdi zmdi-trending-up"></i></p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 text-center">
                <div class="card tasks_report">
                    <div class="body">
                        <input type="text" id="memoryUsedCir" class="knob dial2" value="70" data-width="90" data-height="90" data-thickness="0.1" data-fgColor="#7b69ec" readonly>
                        <h6 class="m-t-20" id="memoryUsed">内存使用量</h6>
<!--                        th:text="${session.loginUserNumberSessionListener.MERCHANT_ONLINE_NUMBER}"-->
                        <p class="displayblock m-b-0" id="memoryUsedPercent">13% 占比 <i class="zmdi zmdi-trending-down"></i></p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 text-center">
                <div class="card tasks_report">
                    <div class="body">
                        <input type="text" id="memoryFreeCir" class="knob dial3" value="99" data-width="90" data-height="90" data-thickness="0.1" data-fgColor="#f9bd53" readonly>
<!--                         th:text="${session.loginUserNumberSessionListener.TEACHER_ONLINE_NUMBER}"-->
                        <h6 class="m-t-20" id="memoryFree">内存剩余量</h6>
                        <p class="displayblock m-b-0" id="memoryFreePercent">75% 占比 <i class="zmdi zmdi-trending-up"></i></p>

                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 text-center">
                <div class="card tasks_report">
                    <div class="body">
                        <input type="text" id="swapUsedCir" class="knob dial4" value="88" data-width="90" data-height="90" data-thickness="0.1" data-fgColor="#00adef" readonly>
<!--                        th:text="${session.loginUserNumberSessionListener.ONLINE_NUMBER}"-->
                        <h6 class="m-t-20" id="swapUsed">交换区使用量</h6>
                        <p class="displayblock m-b-0" id="swapUsedPercent">89%<i class="zmdi zmdi-trending-up"></i></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row clearfix">
            <div class="col-lg-6 col-md-12 col-sm-12">
                <div class="card product-report">
                    <div class="header">
                        <h2><strong>温度变化</strong></h2>
                    </div>
                    <div class="body">
                        <div class="row clearfix">
                            <div class="col-lg-4 col-md-4 col-sm-4 text-center m-b-10">
                                <small class="text-muted">信息1</small>
                                <div class="sparkline m-t-20" data-type="bar" data-width="97%" data-height="21px" data-bar-Width="2" data-bar-Spacing="6" data-bar-Color="rgb(134, 139, 239)">7,5,3,1,5,9,8,5,2,6,5,4,2,5,8,4,5,6,3,5,7,8</div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 text-center m-b-10">
                                <small class="text-muted">信息2</small>
                                <div class="sparkline m-t-20" data-type="bar" data-width="97%" data-height="21px" data-bar-Width="2" data-bar-Spacing="6" data-bar-Color="rgb(25, 161, 183)">2,5,8,4,5,6,3,5,7,8,4,6,7,5,3,1,5,9,8,5,5,4</div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 text-center m-b-10">
                                <small class="text-muted">信息3</small>
                                <div class="sparkline m-t-20" data-type="bar" data-width="97%" data-height="21px" data-bar-Width="2" data-bar-Spacing="6" data-bar-Color="rgb(254, 191, 15)">6,5,4,3,2,1,9,8,7,8,5,2,2,5,8,4,5,6,7,8,4,6</div>
                            </div>
                        </div>
                        <div id="m_area_chart2">
                            <canvas id="chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12">
                <div class="card">
                    <div class="header">
                        <h2><strong>最新发布的工作</strong></h2>
                    </div>
                    <div class="body">
                        <ul class="inbox-widget list-unstyled clearfix" th:each="job : ${jobList}">
                            <li class="inbox-inner">
                                <a href="javascript:void(0)">
                                    <div class="inbox-item">
                                        <div class="inbox-item-info">
                                            <p class="author" th:text="${job.promulgator}">张三</p>
                                            <p class="inbox-message" th:text="${job.jobAddress}">工作地址</p>
                                            <p class="inbox-date" th:text="${#dates.format(job.releaseTime, 'yyyy-MM-dd hh:mm:ss')}">发布时间</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="card">
                    <div class="header">
                        <h2><strong>用户</strong> 信息</h2>
                    </div>
                    <div class="body table-responsive">
                        <table class="table table-striped m-b-0">
                            <thead>
                                <tr>
                                    <th>学号/工号</th>
                                    <th data-breakpoints="xs">姓名</th>
                                    <th data-breakpoints="xs">身份证号码</th>
                                    <th data-breakpoints="xs">邮箱</th>
                                    <th>电话</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="user : ${userList}">
                                    <td th:text="${user.account}">Tiger Nixon</td>
                                    <td th:text="${user.name}">System Architect</td>
                                    <td th:text="${user.identification}">Edinburgh</td>
                                    <td th:text="${user.email}">61</td>
                                    <td><span class="tag tag-danger" th:text="${user.phone}"> Suspended</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Jquery Core Js --> 
<script th:src="@{/assets/bundles/libscripts.bundle.js}" src="../assets/bundles/libscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js -->
<script th:src="@{/assets/bundles/vendorscripts.bundle.js}" src="../assets/bundles/vendorscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js -->

<script th:src="@{/assets/bundles/index.bundle.js}" src="../assets/bundles/index.bundle.js"></script> <!-- Jquery Knob, Count To, Sparkline Js -->
<script th:src="@{/assets/bundles/morrisscripts.bundle.js}" src="../assets/bundles/morrisscripts.bundle.js"></script><!-- Morris Plugin Js -->
<script th:src="@{/assets/bundles/footable.bundle.js}" src="../assets/bundles/footable.bundle.js"></script> <!-- Lib Scripts Plugin Js -->

<script th:src="@{/assets/bundles/mainscripts.bundle.js}" src="../assets/bundles/mainscripts.bundle.js"></script>
<script th:src="@{/assets/js/pages/charts/jquery-knob.js}" src="../assets/js/pages/charts/jquery-knob.js"></script>
<script th:src="@{/assets/js/pages/charts/chart.min.js}" src="../assets/js/pages/charts/chart.min.js"></script>

<script th:src="@{/assets/js/pages/tables/footable.js}" src="../assets/js/pages/tables/footable.js"></script><!-- Custom Js -->
<script>
    /*global $ */
    $(document).ready(function() {
        "use strict";
        $('.menu > ul > li:has( > ul)').addClass('menu-dropdown-icon');
        //Checks if li has sub (ul) and adds class for toggle icon - just an UI

        $('.menu > ul > li > ul:not(:has(ul))').addClass('normal-sub');

        $(".menu > ul > li").hover(function(e) {
            if ($(window).width() > 943) {
                $(this).children("ul").stop(true, false).fadeToggle(150);
                e.preventDefault();
            }
        });
        //If width is more than 943px dropdowns are displayed on hover
        $(".menu > ul > li").click(function() {
            if ($(window).width() <= 943) {
                $(this).children("ul").fadeToggle(150);
            }
        });
        //If width is less or equal to 943px dropdowns are displayed on click (thanks Aman Jain from stackoverflow)

        $(".h-bars").click(function(e) {
            $(".menu > ul").toggleClass('show-on-mobile');
            e.preventDefault();
        });
        //when clicked on mobile-menu, normal menu is shown as a list, classic rwd menu story (thanks mwl from stackoverflow)

        $.ajax({
            type: 'POST',
            url: '/getWeatherData',
            success: function (data) {
                console.log(data);
                var dataX = data.name;
                var dataY1 = data.low;
                var dataY2 = data.high;

                var config = {
                    type: 'line',
                    data: {
                        labels: dataX,
                        datasets: [
                            {
                                label: '低温变化',
                                data: dataY1,
                                backgroundColor: '#00ABED',
                                borderColor: '#00ABED',
                                fill: false
                            },
                            {
                                label: '高温变化',
                                data: dataY2,
                                backgroundColor: '#E2708C',
                                borderColor: '#E2708C',
                                fill: false
                            }
                        ],
                        options: {
                            responsive: true,
                            title: {
                                display: true,
                                text: "实时数据"
                            }
                        }
                    }
                };
                var ctx = document.getElementById('chart').getContext('2d');
                var chart = new Chart(ctx, config);
            }
        });

        updateSysData();

        function updateSysData() {
            setInterval(function () {
                $.ajax({
                    type: 'POST',
                    url: '/getMemoryInformation',
                    success: function (data) {
                        //内存总量
                        var memoryTotal = data.MemoryTotal;
                        //内存使用量
                        var memoryUsed = data.MemoryUsed;
                        //内存剩余量
                        var memoryFree = data.MemoryFree;
                        //交换区总量
                        var swapTotal = data.SwapTotal;
                        //交换区使用量
                        var SwapUsed = data.SwapUsed;
                        //交换区剩余量
                        var swapFree = data.SwapFree;

                        $("#memoryTotal").text("内存总量：" + memoryTotal);
                        $("#memoryFree").text("内存剩余：" + memoryFree);
                        $("#memoryUsed").text("内存使用：" + memoryUsed);
                        $("#swapUsed").text("交换区使用：" + SwapUsed);

                        $("#memoryPercent").text(Percentage(memoryTotal, memoryTotal) + "% 占比");
                        $("#memoryUsedPercent").text(Percentage(memoryUsed, memoryTotal) + "% 占比");
                        $("#memoryFreePercent").text(Percentage(memoryFree, memoryTotal) + "% 占比");
                        $("#swapUsedPercent").text(Percentage(SwapUsed, swapTotal) + "% 占比");

                        $("#memoryUsedCir").attr("value", Percentage(memoryUsed, memoryTotal));
                        $("#memoryFreeCir").attr("value", Percentage(memoryFree, memoryTotal));
                        $("#swapUsedCir").attr("value", Percentage(SwapUsed, swapTotal));

                        console.log(data);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        console.log(XMLHttpRequest.responseText);
                    }
                })
            }, 1500)
        }
        // 小数点后两位百分比
        function Percentage(number1, number2) {
            return (Math.round(number1 / number2 * 10000) / 100.00);
        }
    });
</script>
</body>
</html>